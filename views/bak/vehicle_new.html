<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%=title%></title>
    <link rel="stylesheet" href="/assets/Bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/app.css">
    <link rel="stylesheet" href="/stylesheets/aui.css">
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
    <script src="/assets/html5shiv.min.js"></script>
    <script src="/assets/respond.min.js"></script>
    <![endif]-->
    <style>
        .main {
            border: 1px solid #cccccc;
        }
    </style>
</head>
<body>
<!--头部 导航-->
<% include header.html %>

<div class="container">
    <section class="aui-screen-box">
        <div class="aui-screen-content">
            <div class="aui-choice-screen">
                <div class="aui-screen-head-choice">
                    <dl>
                        <dt>已选条件：</dt>
                        <dd style="" class=aui-clear-delete>
                            <div class=aui-clear-list>
                                <div class="aui-selected-info selectedShow" style="">
                                    <span>排量：</span>
                                    <label>2.6-3.0L</label>
                                    <em></em>
                                </div>
                            </div>

                            <div style="display:none" class="aui-eliminate">清除筛选条件</div>
                        </dd>
                    </dl>
                </div>
                <div id="aui-selectList" class="aui-screen-list-box">
                    <dl class="aui-screen-list-item" attr="terminal_brand_s">
                        <dt>车辆类型：</dt>
                        <dd>
                            <% for(var i=0;i< models.length;i++){ %>
                            <a href="javascript:void(0)" data-model="<%= models[i].name %>"><%= models[i].name %></a>
                            <% } %>
                        </dd>
                    </dl>
                    <dl class="aui-screen-list-item" attr="">
                        <dt>价格：</dt>
                        <dd>
                            <a href="javascript:void(0)" values2="" values1="" attrval="5万以下">5万以下</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="5-8万">5-8万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="8-12万">8-12万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="12-18万">12-18万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="18-25万">18-25万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="25-40万">25-40万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="40-80万">40-80万</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="80万以上">80万以上</a>
                            <label class="aui-sr-input">
                                <input type="text" placeholder="" value="">
                                -
                                <input type="text" placeholder="" value="">
                                <button>确认</button>
                            </label>
                        </dd>
                    </dl>
                    <dl class=" aui-screen-list-item" attr="aui-terminal">
                        <dt>排量：</dt>
                        <dd>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">1.0L及以下</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">1.1-1.6L</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">1.7-2.0L</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">2.1-2.5L</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">2.6-3.0L</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">3.1-4.0L</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">4.0L以上</a>
                        </dd>
                    </dl>
                    <dl class=" aui-screen-list-item" attr="aui-terminal">
                        <dt>能源：</dt>
                        <dd>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">汽油</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">柴油</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">油电混合</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">纯电动</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">插电式混动</a>
                        </dd>
                    </dl>
                    <dl class=" aui-screen-list-item" attr="aui-terminal">
                        <dt>国别：</dt>
                        <dd>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">中国</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">德国</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">日本</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">美国</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">韩国</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">其他</a>
                        </dd>
                    </dl>
                    <dl class=" aui-screen-list-item" attr="aui-terminal">
                        <dt>结构：</dt>
                        <dd>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">两厢</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">三厢</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">掀背</a>
                            <a href="javascript:void(0)" values2="" values1="" attrval="">其他</a>
                        </dd>
                    </dl>
                    <dl class="aui-screen-list-item aui-aui-screen-list-item" attr="aui-terminal">
                        <dt>按配置：</dt>
                        <dd>
                            <ul class="aui-list-pz-size">
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">全景天窗
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">电动天窗
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">电动调节座椅
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">车身ESP
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">氙气大灯
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">GPS导航
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">定速巡航
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">真皮座椅
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">倒车雷达
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">全自动空调
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">多功能方向盘
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">LED大灯
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">倒车影像
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" value="21">无钥匙启动
                                    </label>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </section>
</div>


<div class="container main">
    <div class="row">
        <dl>
            <dt>已选条件：</dt>
            <dd>
                <div class="aui-selected-info selectedShow" style="">
                    <span>排量：</span>
                    <label>2.6-3.0L</label>
                    <em></em>
                </div>
            </dd>
        </dl>
        <span></span>
    </div>
    <div class="row">
        <div class="btn-group" role="group">
            <% for(var i=0;i< models.length;i++){ %>
            <button type="button" class="btn btn-default"><%= models[i].name %></button>
            <% } %>
        </div>
    </div>
    <div class="row">
        <div>
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <% for(var i=0;i< keys.length;i++){ %>
                <li role="presentation"><a href="#key_<%= keys[i] %>" role="tab" data-toggle="tab"><%= keys[i] %></a>
                </li>
                <% } %>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <% for(var i=0;i< brands.length;i++){ %>
                <div role="tabpanel" class="tab-pane" id="key_<%= brands[i].key %>">
                    <div class="btn-group" role="group">
                        <% for(var j=0;j< brands[i].children.length;j++){ %>
                        <button type="button" class="btn btn-default" data-brand="<%= brands[i].children[j].name %>"><%=
                            brands[i].children[j].name %>
                        </button>
                        <% } %>
                    </div>
                </div>
                <% } %>
            </div>
        </div>
    </div>

    <div class="row">
        <div id="seriesList">

        </div>
    </div>
</div>
<div class="container">
    <div class="row" id="carList">

    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination" id="pageul">

        </ul>
    </nav>
</div>

<!--底部-->
<% include footer.html %>


<script id="series" type="text/html">
    <div class="btn-group" role="group">
        {{each list}}
        <button type="button" class="btn btn-default">{{$value.name}}</button>
        {{/each}}
    </div>
</script>

<script id="cars" type="text/html">
    {{each list}}
    <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
            <img src="/images/noPic.gif" alt="..." width="150px">
            <div class="caption">
                <h3>{{$value.brand}} &nbsp;&nbsp; {{$value.series}}</h3>
                <p>{{$value.model}} &nbsp;&nbsp; {{$value.FUEL_NAME}}</p>
                <p>{{$value.MADE_YEAR}} &nbsp;&nbsp; {{$value.COLOR}}</p>
            </div>
        </div>
    </div>
    {{/each}}
</script>

<script src="/assets/jQuery/jquery.min.js"></script>
<script src="/assets/template-web.js"></script>
<script src="/assets/Bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/jqPaginator/jqpaginator.min.js"></script>

<script>

    $(function ($) {
        $(".tab-content").on("click", '.btn', function () {
            var brand = $(this).attr('data-brand');
            if (brand) {
                $.get("/getSeries/" + brand, function (data) {
                        //console.log("Data Saved: " + data);
                        data = JSON.parse(data);
                        var html = template('series', {list: data});
                        $('#seriesList').html(html);
                    }
                );
            }
        });

        $.get('/getTotalPageForCar', function (data) {
            // console.log('-----------total--------' + data)
            data = JSON.parse(data);
            var result = data['total'];
            var pages = Math.ceil(result / 10);
            //分页组件
            $.jqPaginator('#pageul', {
                totalPages: pages,
                visiblePages: 5,
                currentPage: 1,
                first: '<li class="first"><a href="javascript:;">首页</a></li>',
                prev: '<li class="prev"><a href="javascript:;">上一页</a></li>',
                next: '<li class="next"><a href="javascript:;">下一页</a></li>',
                last: '<li class="last"><a href="javascript:;">末页</a></li>',
                page: '<li class="page"><a href="javascript:;">{{page}}</a></li>',
                onPageChange: function (num, type) {
                    // console.log('page------------------' + num);
                    paging(num);
                }
            });
        });

        function paging(page) {
            $.get("/queryAsPage/" + page, function (data) {
                    // console.log("=----------------" + data);
                    data = JSON.parse(data);
                    var html = template('cars', data);
                    $('#carList').html(html);
                }
            );
        }
    });
</script>
</body>
</html>